<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hamster Verse - –ò–≥—Ä–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Announcement Banner -->
        <div class="announcement-banner" id="announcement">
            <span>üéâ –ù–æ–≤—ã–µ –∏–≥—Ä—ã —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã!</span>
            <button class="close-announcement" onclick="closeAnnouncement()">√ó</button>
        </div>

        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-titles">
                    <h1 class="app-title">Hamster Verse</h1>
                    <p class="app-subtitle">–í—Å–µ –∏–≥—Ä—ã Telegram –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ</p>
                </div>
                <div class="user-avatar" id="tg-avatar">
                    üêπ
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Games Section -->
            <section id="games-section" class="content-section active">
                <div class="section-header">
                    <h2>–ò–≥—Ä—ã</h2>
                    <p class="section-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É –∏ –Ω–∞—á–Ω–∏—Ç–µ –∏–≥—Ä–∞—Ç—å</p>
                </div>
                <div class="games-grid" id="games-container">
                    <!-- Games will be loaded here -->
                </div>
            </section>

            <!-- Exchanges Section -->
            <section id="exchanges-section" class="content-section">
                <div class="section-header">
                    <h2>–ë–∏—Ä–∂–∏</h2>
                    <p class="section-subtitle">–¢–æ–ø–æ–≤—ã–µ –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∏</p>
                </div>
                <div class="guide-button-container">
                    <button class="guide-button" onclick="showBuyGuide()">
                        üìö –ö–∞–∫ –∫—É–ø–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É
                    </button>
                </div>
                <div class="buy-guide" id="buy-guide" style="display: none;">
                    <div class="guide-steps">
                        <div class="guide-step">
                            <div class="step-number">1</div>
                            <div class="step-content">
                                <strong>–í—ã–±–µ—Ä–∏—Ç–µ –±–∏—Ä–∂—É</strong>
                                <p>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –æ–¥–Ω–æ–π –∏–∑ –ø–ª–∞—Ç—Ñ–æ—Ä–º</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="step-number">2</div>
                            <div class="step-content">
                                <strong>–ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é</strong>
                                <p>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ª–∏—á–Ω–æ—Å—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</p>
                            </div>
                        </div>
                        <div class="guide-step">
                            <div class="step-number">3</div>
                            <div class="step-content">
                                <strong>–ü–æ–ø–æ–ª–Ω–∏—Ç–µ —Å—á–µ—Ç</strong>
                                <p>–í–Ω–µ—Å–∏—Ç–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ –±–∞–Ω–∫–æ–≤—Å–∫—É—é –∫–∞—Ä—Ç—É</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="exchanges-grid" id="exchanges-container">
                    <!-- Exchanges will be loaded here -->
                </div>
            </section>

            <!-- News Section -->
            <section id="news-section" class="content-section">
                <div class="section-header">
                    <h2>–ù–æ–≤–æ—Å—Ç–∏</h2>
                    <p class="section-subtitle">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</p>
                </div>
                <div class="news-list" id="news-container">
                    <!-- News will be loaded here -->
                </div>
            </section>

            <!-- Profile Section -->
            <section id="profile-section" class="content-section">
                <div class="profile-header">
                    <div class="profile-avatar" id="tg-avatar-large">
                        üêπ
                    </div>
                    <div class="profile-info">
                        <h2 id="tg-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <p id="tg-username">@username</p>
                        <div class="user-stats">
                            <span class="stat">üéÆ 5 –∏–≥—Ä</span>
                            <span class="stat">‚≠ê 128 –æ—á–∫–æ–≤</span>
                        </div>
                    </div>
                </div>

                <div class="theme-toggle-container">
                    <button class="theme-toggle" id="theme-toggle">
                        <span class="theme-icon">üåô</span>
                        <span class="theme-text">–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                    </button>
                </div>

                <div class="action-buttons">
                    <button class="action-button" id="share-button">
                        <span class="action-icon">üì§</span>
                        <span class="action-text">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º</span>
                    </button>
                    <button class="action-button" onclick="showNotification('–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info')">
                        <span class="action-icon">‚öôÔ∏è</span>
                        <span class="action-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                    </button>
                    <button class="action-button" onclick="showNotification('–§—É–Ω–∫—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info')">
                        <span class="action-icon">‚ùì</span>
                        <span class="action-text">–ü–æ–º–æ—â—å</span>
                    </button>
                </div>

                <div class="app-info">
                    <p>Hamster Verse v<span id="app-version">2.3.0</span></p>
                    <p class="app-build">Build: <span id="app-build">2024.01.20</span></p>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-item active" data-section="games-section">
                <span class="nav-icon">üéÆ</span>
                <span class="nav-label">–ò–≥—Ä—ã</span>
            </button>
            <button class="nav-item" data-section="exchanges-section">
                <span class="nav-icon">üí±</span>
                <span class="nav-label">–ë–∏—Ä–∂–∏</span>
            </button>
            <button class="nav-item" data-section="news-section">
                <span class="nav-icon">üì∞</span>
                <span class="nav-label">–ù–æ–≤–æ—Å—Ç–∏</span>
            </button>
            <button class="nav-item" data-section="profile-section">
                <span class="nav-icon">üë§</span>
                <span class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</span>
            </button>
        </nav>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const APP_CONFIG = {
            version: '2.4.0',
            build: '2024.01.21'
        };

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
        const GAMES_DATA = [
            {
                id: "1",
                name: "Hamster Gamedev",
                description: "–°–æ–∑–¥–∞–π –∏–≥—Ä–æ–≤—É—é —Å—Ç—É–¥–∏—é –∏ —Å—Ç–∞–Ω—å –ª–∏–¥–µ—Ä–æ–º –∏–Ω–¥—É—Å—Ç—Ä–∏–∏",
                players: "15.2K",
                url: "https://t.me/hamster_gamedev_bot/start",
                image: "images/hunterer-gamesdev.jpg",
                category: "–°—Ç—Ä–∞—Ç–µ–≥–∏—è",
                rating: "4.8"
            },
            {
                id: "2", 
                name: "Hamster King",
                description: "–°—Ç–∞–Ω—å –∫–æ—Ä–æ–ª—ë–º –≤ —ç–ø–∏—á–µ—Å–∫–∏—Ö –±–∏—Ç–≤–∞—Ö –∑–∞ –º–æ–Ω–µ—Ç—ã",
                players: "8.7K",
                url: "https://t.me/hamster_king_bot/start",
                image: "images/hamster_king.jpg",
                category: "–ê—Ä–∫–∞–¥–∞",
                rating: "4.6"
            },
            {
                id: "3",
                name: "Hamster Fight Club", 
                description: "–ë–æ–π—Ü–æ–≤—Å–∫–∏–π –∫–ª—É–± –¥–ª—è —Å–∞–º—ã—Ö —Å–∏–ª—å–Ω—ã—Ö —Ö–æ–º—è–∫–æ–≤",
                players: "5.3K",
                url: "https://t.me/hamster_fight_club_bot/start",
                image: "images/hunterer-fight-club.jpg",
                category: "–≠–∫—à–µ–Ω",
                rating: "4.7"
            },
            {
                id: "4",
                name: "Bitquest",
                description: "–ö—Ä–∏–ø—Ç–æ-–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ –≤ —Ñ—ç–Ω—Ç–µ–∑–∏ –º–∏—Ä–µ –±–ª–æ–∫—á–µ–π–Ω–∞",
                players: "12.1K",
                url: "https://t.me/bitquest_bot/start",
                image: "images/bitquest.jpg",
                category: "RPG",
                rating: "4.9"
            },
            {
                id: "5",
                name: "Crypto Hamster",
                description: "–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –∫—Ä–∏–ø—Ç—É –≤–º–µ—Å—Ç–µ —Å —Ö–æ–º—è–∫–∞–º–∏",
                players: "9.4K",
                url: "https://t.me/crypto_hamster_bot/start",
                image: "images/hunter-binar.png",
                category: "–≠–∫–æ–Ω–æ–º–∏–∫–∞",
                rating: "4.5"
            }
        ];

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–∏—Ä–∂ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
        const EXCHANGES_DATA = [
            {
                id: "1",
                name: "Binance",
                description: "–ö—Ä—É–ø–Ω–µ–π—à–∞—è –º–∏—Ä–æ–≤–∞—è –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∞",
                url: "https://www.binance.com",
                logo: "images/binarace.png",
                features: ["Spot", "Futures", "Earn", "NFT"],
                rating: "4.9"
            },
            {
                id: "2",
                name: "Bybit",
                description: "–õ—É—á—à–∏–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Ç—Ä–µ–π–¥–∏–Ω–≥–∞",
                url: "https://www.bybit.com",
                logo: "images/bybel.jpg",
                features: ["Futures", "Copy Trading", "Options"],
                rating: "4.7"
            },
            {
                id: "3",
                name: "OKX",
                description: "–¢—ã—Å—è—á–∏ —Ç–æ—Ä–≥–æ–≤—ã—Ö –ø–∞—Ä",
                url: "https://www.okx.com",
                logo: "images/okx.png",
                features: ["Spot", "DeFi", "NFT", "Web3"],
                rating: "4.6"
            },
            {
                id: "4",
                name: "Gate.io",
                description: "–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞",
                url: "https://www.gate.io",
                logo: "images/gate.png",
                features: ["HODL", "Startup", "Labs"],
                rating: "4.5"
            },
            {
                id: "5",
                name: "MEXC",
                description: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ª–∏—Å—Ç–∏–Ω–≥–∏ –∏ –Ω–∏–∑–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏",
                url: "https://www.mexc.com",
                logo: "images/mexc.png",
                features: ["Spot", "ETF", "Earn", "Futures"],
                rating: "4.4"
            }
        ];

        // –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏
        const NEWS_DATA = [
            {
                id: "1", 
                title: "üéä Hamster Verse 2.4 –∑–∞–ø—É—â–µ–Ω!",
                content: "–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω, –Ω–æ–≤—ã–µ –∏–≥—Ä—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –¢–µ–ø–µ—Ä—å –µ—â–µ –ª—É—á—à–µ!",
                date: new Date().toISOString(),
                type: "update"
            },
            {
                id: "2",
                title: "üÜï –î–æ–±–∞–≤–ª–µ–Ω—ã 5 –Ω–æ–≤—ã—Ö –∏–≥—Ä",
                content: "–í –∫–∞—Ç–∞–ª–æ–≥ –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∏–≥—Ä—ã: Hamster Gamedev, Hamster King, Hamster Fight Club, Bitquest –∏ Crypto Hamster.",
                date: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                type: "games"
            },
            {
                id: "3",
                title: "üìà –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –±–∏—Ä–∂",
                content: "–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–ø–æ–≤—ã—Ö –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∞—Ö —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ª–æ–≥–æ—Ç–∏–ø–∞–º–∏ –∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏.",
                date: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
                type: "exchanges"
            },
            {
                id: "4",
                title: "üé® –£–ª—É—á—à–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å",
                content: "–ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –¥–∏–∑–∞–π–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ù–æ–≤—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏, —Ç–µ–º—ã –∏ —É–ª—É—á—à–µ–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è.",
                date: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(),
                type: "design"
            }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            console.log('üöÄ Hamster Verse v' + APP_CONFIG.version + ' initializing...');
            
            try {
                setupNavigation();
                setupTelegramIntegration();
                setupThemeToggle();
                setupShareButton();
                
                // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                displayGames(GAMES_DATA);
                displayExchanges(EXCHANGES_DATA);
                displayNews(NEWS_DATA);
                
                document.getElementById('app-version').textContent = APP_CONFIG.version;
                document.getElementById('app-build').textContent = APP_CONFIG.build;
                
                console.log('‚úÖ Hamster Verse initialized successfully');
                
            } catch (error) {
                console.error('‚ùå App initialization failed:', error);
                showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', 'error');
            }
        }

        // ==================== UI FUNCTIONS ====================

        function displayGames(games) {
            const container = document.getElementById('games-container');
            
            if (!games || games.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üéÆ</div>
                        <h3>–ò–≥—Ä—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</h3>
                        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∑–∂–µ</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = games.map((game, index) => `
                <div class="game-card" data-game-id="${game.id}">
                    <div class="game-badge">‚≠ê ${game.rating}</div>
                    <div class="game-header">
                        <div class="game-image">
                            <img src="${game.image}" alt="${game.name}" onerror="handleImageError(this)">
                            <div class="game-category">${game.category}</div>
                        </div>
                        <div class="game-info">
                            <h3 class="game-title">${game.name}</h3>
                            <p class="game-description">${game.description}</p>
                            <div class="game-footer">
                                <div class="game-stats">
                                    <div class="game-players">
                                        <span class="stat-icon">üë•</span>
                                        <span>${game.players}</span>
                                    </div>
                                </div>
                                <button class="play-button" data-url="${game.url}">
                                    <span class="play-icon">üéØ</span>
                                    –ò–≥—Ä–∞—Ç—å
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
            
            setupGameButtons();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                const cards = container.querySelectorAll('.game-card');
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.classList.add('fade-in-up');
                });
            }, 100);
        }

        function handleImageError(img) {
            console.warn('Image failed to load:', img.src);
            img.style.display = 'none';
            const parent = img.parentElement;
            parent.style.background = 'var(--accent-gradient)';
            parent.innerHTML = '<div class="image-fallback"><span>üéÆ</span></div>';
        }

        function displayExchanges(exchanges) {
            const container = document.getElementById('exchanges-container');
            
            if (!exchanges || exchanges.length === 0) {
                container.innerHTML = '<div class="empty-state"><p>–ë–∏—Ä–∂–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p></div>';
                return;
            }
            
            container.innerHTML = exchanges.map(exchange => `
                <a href="${exchange.url}" class="exchange-card" target="_blank" rel="noopener">
                    <div class="exchange-badge">‚≠ê ${exchange.rating}</div>
                    <div class="exchange-content">
                        <div class="exchange-logo">
                            <img src="${exchange.logo}" alt="${exchange.name}" onerror="handleImageError(this)">
                        </div>
                        <div class="exchange-info">
                            <h3 class="exchange-name">${exchange.name}</h3>
                            <p class="exchange-description">${exchange.description}</p>
                            <div class="exchange-features">
                                ${exchange.features.map(feature => `
                                    <span class="exchange-feature">${feature}</span>
                                `).join('')}
                            </div>
                        </div>
                        <div class="exchange-arrow">‚Üí</div>
                    </div>
                </a>
            `).join('');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                const cards = container.querySelectorAll('.exchange-card');
                cards.forEach((card, index) => {
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.classList.add('fade-in-up');
                });
            }, 100);
        }

        function displayNews(news) {
            const container = document.getElementById('news-container');
            
            if (!news || news.length === 0) {
                container.innerHTML = '<div class="news-item"><p>–ù–æ–≤–æ—Å—Ç–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p></div>';
                return;
            }
            
            container.innerHTML = news.map(item => `
                <div class="news-item news-${item.type}">
                    <div class="news-header">
                        <span class="news-date">${formatDate(item.date)}</span>
                        <span class="news-type">${getNewsTypeIcon(item.type)}</span>
                    </div>
                    <div class="news-title">${item.title}</div>
                    <div class="news-content">${item.content}</div>
                </div>
            `).join('');
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
            setTimeout(() => {
                const items = container.querySelectorAll('.news-item');
                items.forEach((item, index) => {
                    item.style.animationDelay = `${index * 0.1}s`;
                    item.classList.add('fade-in-up');
                });
            }, 100);
        }

        function getNewsTypeIcon(type) {
            const icons = {
                'update': 'üîÑ',
                'games': 'üéÆ',
                'exchanges': 'üí±',
                'design': 'üé®'
            };
            return icons[type] || 'üì¢';
        }

        function setupGameButtons() {
            const playButtons = document.querySelectorAll('.play-button');
            playButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const url = this.getAttribute('data-url');
                    openGame(url);
                });
            });
            
            const gameCards = document.querySelectorAll('.game-card');
            gameCards.forEach(card => {
                card.addEventListener('click', function() {
                    const playButton = this.querySelector('.play-button');
                    const url = playButton.getAttribute('data-url');
                    openGame(url);
                });
            });
        }

        function openGame(url) {
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.openLink(url);
            } else {
                window.open(url, '_blank', 'noopener,noreferrer');
            }
        }

        // ==================== OTHER FUNCTIONS ====================

        function setupNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.content-section');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-section');
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    sections.forEach(section => {
                        section.classList.remove('active');
                        if (section.id === targetSection) {
                            section.classList.add('active');
                        }
                    });
                    
                    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –≤–µ—Ä—Ö—É
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
        }

        function setupTelegramIntegration() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                
                tg.expand();
                tg.enableClosingConfirmation();
                
                updateUserProfile(tg.initDataUnsafe.user);
                
                tg.ready();
            } else {
                console.log('Telegram WebApp not detected, running in browser mode');
                updateUserProfile({
                    first_name: '–ò–≥—Ä–æ–∫',
                    username: 'player'
                });
            }
        }

        function updateUserProfile(user) {
            if (user) {
                const name = user.first_name || '–ò–≥—Ä–æ–∫';
                const username = user.username ? `@${user.username}` : '–ò–≥—Ä–æ–∫';
                
                document.getElementById('tg-name').textContent = name;
                document.getElementById('tg-username').textContent = username;
                
                if (user.photo_url) {
                    document.getElementById('tg-avatar').innerHTML = `<img src="${user.photo_url}" alt="${name}" style="width: 100%; height: 100%; border-radius: 50%;">`;
                    document.getElementById('tg-avatar-large').innerHTML = `<img src="${user.photo_url}" alt="${name}" style="width: 100%; height: 100%; border-radius: 50%;">`;
                }
            }
        }

        function setupThemeToggle() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('.theme-icon');
            const themeText = themeToggle.querySelector('.theme-text');
            
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            updateThemeButton(savedTheme);
            
            themeToggle.addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeButton(newTheme);
            });
            
            function updateThemeButton(theme) {
                if (theme === 'dark') {
                    themeIcon.textContent = '‚òÄÔ∏è';
                    themeText.textContent = '–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
                } else {
                    themeIcon.textContent = 'üåô';
                    themeText.textContent = '–¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
                }
            }
        }

        function setupShareButton() {
            const shareButton = document.getElementById('share-button');
            shareButton.addEventListener('click', shareApp);
        }

        function shareApp() {
            const shareText = "üéÆ –û—Ç–∫—Ä–æ–π –¥–ª—è —Å–µ–±—è Hamster Verse - –≤—Å–µ –ª—É—á—à–∏–µ –∏–≥—Ä—ã Telegram –≤ –æ–¥–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏! –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è —Å–µ–π—á–∞—Å!";
            const shareUrl = window.location.href;
            
            if (window.Telegram && window.Telegram.WebApp) {
                window.Telegram.WebApp.shareUrl(shareUrl, shareText);
            } else if (navigator.share) {
                navigator.share({
                    title: 'Hamster Verse',
                    text: shareText,
                    url: shareUrl
                });
            } else {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    showNotification('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä!', 'success');
                });
            }
        }

        function showBuyGuide() {
            const guide = document.getElementById('buy-guide');
            if (guide.style.display === 'none') {
                guide.style.display = 'block';
                guide.classList.add('fade-in-up');
            } else {
                guide.style.display = 'none';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            const now = new Date();
            const diffTime = Math.abs(now - date);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            if (diffDays === 1) return '–°–µ–≥–æ–¥–Ω—è';
            if (diffDays === 2) return '–í—á–µ—Ä–∞';
            if (diffDays <= 7) return `${diffDays - 1} –¥–Ω—è –Ω–∞–∑–∞–¥`;
            
            return date.toLocaleDateString('ru-RU');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icons = {
                success: '‚úÖ',
                error: '‚ùå',
                info: '‚ÑπÔ∏è'
            };
            
            notification.innerHTML = `
                <div class="notification-icon">${icons[type] || icons.info}</div>
                <div class="notification-content">
                    <div class="notification-message">${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('slide-out');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        function closeAnnouncement() {
            const banner = document.getElementById('announcement');
            if (banner) {
                banner.style.display = 'none';
                localStorage.setItem('announcement_closed', 'true');
            }
        }

        function checkAnnouncementState() {
            const isClosed = localStorage.getItem('announcement_closed');
            if (isClosed === 'true') {
                const banner = document.getElementById('announcement');
                if (banner) {
                    banner.style.display = 'none';
                }
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            const images = document.querySelectorAll('img');
            images.forEach(img => {
                img.setAttribute('draggable', 'false');
            });
            
            checkAnnouncementState();
        });
    </script>
</body>
</html>
